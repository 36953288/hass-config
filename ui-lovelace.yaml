custom_header:
  kiosk_mode: true
  exceptions:
    - conditions:
        user_agent: Mobile
      config:
        kiosk_mode: false

preload_cards:
  - markdown
  - conditional
  - history-graph
  - map
  - iframe

anchors:
  ⚓₁: &title
    entity: sensor.placeholder
    tap_action:
      action: none
    hold_action:
      action: none
    type: state-label
  ⚓₂: &title-style
    color: '#bcbebf'
    font-family: SF Text
    font-size: 2.4vw
    font-weight: 500
    max-width: 1px
    cursor: default
  ⚓₃: &circle-sensor
    type: custom:circle-sensor-card
    stroke_width: 6
    font_style:
      color: '#7d7e80'
      font-size: 1.0vw
      font-weight: 400
      margin-left: -0.8%
      margin-top: 1.9%
    gradient: true
    max: 100
    min: 0
  ⚓₄: &circle-sensor-light
    units: '%'
    fill: none
    stroke_color: '#aaabad'
    <<: *circle-sensor
  ⚓₅: &circle-style
    height: 3.15vw
    width: 3.15vw
    opacity: 0.7

title: Hemma
views:
  - badges: []
    cards:
      - elements:

          - title: preload_popup
            entities:
              - input_number.monitorer_volume
              - group.automation_system_reference
              - input_select.hdmi
              - person.mattias
              - person.sanja
            style:
              left: -50%
              opacity: 0
            type: custom:hui-entities-card

          #################################################
          #                                               #
          #                   COVID-19                    #
          #                                               #
          #################################################
      
          - content: >
              <font color='#6a7377'>
              <b><ha-icon icon="mdi:bacteria-outline"></ha-icon> Coronavirus</b>
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:emoticon-sad"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_current') }}</b> smittade
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:emoticon-happy"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_recovered') }}</b> tillfrisknade
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:grave-stone"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_deaths') }}</b> avlidna
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:chart-bar"></ha-icon> 
              {{ ((states('sensor.sweden_coronavirus_confirmed') 
              | int / 10327589 ) * 100) | round(3) }}% av Sverige </font>
            style:
              top: 91.9%
              left: 69.3%
              width: 90vw
              height: 1px
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: '#6a7377'
              font-family: SF Display
              font-size: 1.15vw
              font-weight: 400
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.5
            type: custom:hui-markdown-card

          ##########################################################################
          #                                                                        #
          #                              * SIDEBAR *                               #
          #                                                                        #
          ##########################################################################

          - image: local/sidebar.png
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 50%
              left: 10.6%
              width: 21.5%
              border-right: 1.5px solid rgba(58,69,73,0.2)
            type: image

          #################################################
          #                                               #
          #                     CLOCK                     #
          #                                               #
          #################################################

          - entity: sensor.time
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 10.8%
              left: 2.8%
              color: rgba(255, 255, 255, 0.7)
              font-family: SF Text
              font-size: 5.41vw
              font-weight: 200
              letter-spacing: -0.05vw
              max-width: 1px
              cursor: default
            type: state-label

          #################################################
          #                                               #
          #                   MARKDOWN                    #
          #                                               #
          #################################################

          - content: >
              <font color='#6a7377'><b>{{ states('sensor.dag') }}</b><br>
              <b>{{ states('sensor.datum') }}</b> </font><br> 


              <b>{{ states('sensor.sidebar_greeting') }}</b>


              <b>{{ states('sensor.sidebar_active') }}</b>


              <font color='#6a7377'>
              <b>{{ states('sensor.sidebar_vacuum') }}</b>


              {{ states('sensor.sidebar_weather') }}


              {{ states('sensor.sidebar_skanetrafiken') }}


              {{ states('sensor.tvatta_countdown') }}


              {% if states('sensor.imac_get_ip') == states('sensor.public_ip') 
                 or states('sensor.myip') == states('sensor.public_ip') %}
              {{'\u26A0\uFE0F'}} Kontrollera VPN-anslutning. {% endif %}
              

              {% if is_state('binary_sensor.check_plex', 'off') %}
              {{'\u26A0\uFE0F'}} Plex är nere...{% endif %}


              {% if is_state('binary_sensor.nas_internet_access', 'off') %}
              {{'\u26A0\uFE0F'}} Kontrollera NAS internetåtkomst{% endif %}
              </font>

            style:
              top: 16%
              left: 11%
              width: 17.5vw
              height: 1px
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: rgba(255, 255, 255, 0.9)
              font-family: SF Display
              font-size: 1.6vw
              font-weight: 300
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.75
            type: custom:hui-markdown-card

          #################################################
          #                                               #
          #                KRISINFORMATION                #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.krisinformation_visibility
                state: 'on'
            elements:
              - cards:
                - content: >
                    {{'\u26A0\uFE0F'}} <b>Krisinformation</b><br><br>
                    {{ as_timestamp(state_attr('sensor.krisinformation_sverige', 
                    'messages')[0]["Published"]) | timestamp_custom('%Y-%m-%d') }}<br>
                    {{ state_attr('sensor.krisinformation_sverige', 
                    'messages')[0]["Message"] | truncate(280, True, '...', 0) }}
                  style: |
                    ha-card {
                      padding: 0.4vw;
                    }
                  type: custom:hui-markdown-card
                - type: "custom:button-card"
                  show_label: true
                  label: OK
                  tap_action:
                    action: call-service
                    service: input_boolean.turn_off
                    service_data:
                      entity_id: input_boolean.krisinformation_visibility
                  styles:
                    label:
                      - font-size: 1.5vw
                      - background: '#FFFFFF15'
                      - border-radius: 0.6vw
                      - font-weight: 500
                      - letter-spacing: 0.09vw
                      - opacity: 0.65
                      - padding: 0.7vw 1vw 0.8vw 1vw
                      - font-family: SF Display
                    card:
                      - width: 4.5vw
                      - height: 5vw
                      - margin-top: -0.5vw
                      - padding-bottom: 1vw
                      - margin-left: 138%
                style:
                  --ha-card-background: '#5a1f1f'
                  --ha-card-box-shadow: none
                  filter: 'drop-shadow(0 0 1vw #1e1e1e)'
                  --primary-text-color: rgba(255, 255, 255, 0.9)
                  font-family: SF Display
                  font-size: 1.3vw
                  font-weight: 300
                  height: 1px
                  max-height: 4vw
                  left: 10.7%
                  letter-spacing: 0.06vw
                  line-height: 1.7vw
                  max-width: 17vw
                  position: absolute
                  top: 18%
                  width: 17.5vw
                  hyphens: auto
                  z-index: 10
                  --ha-card-border-radius: 0.7vw
                  --ha-card-border: '0.1vw solid #292c2e'
                type: custom:stack-in-card

          #################################################
          #                                               #
          #                 LAUNDRY TIMER                 #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.laundry_timer_visibility
                state: 'on'
            elements:
              - type: "custom:button-card"
                entity: timer.laundry
                show_icon: false
                show_name: false
                show_state: true
                tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.restart_laundry_timer
                hold_action:
                  action: call-service
                  service: input_boolean.turn_off
                  service_data:
                    entity_id: input_boolean.laundry_timer_visibility
                styles:
                  card:
                    - background: '#202a2f30'
                    - border-radius: 0.7vw
                    - box-shadow: none
                    - border: '0.1vw solid #292c2e'
                  state:
                    - font-size: 2.5vw
                    - font-weight: 500
                    - letter-spacing: 0.09vw
                    - opacity: 0.65
                    - padding: 0.5vw 1vw 0.5vw 1vw
                style:
                  top: 78%
                  left: 10.8%
                  font-size: 1.6vw

          #################################################
          #                                               #
          #                 VACUUM BUTTON                 #
          #                                               #
          #################################################

          - icon: 'bha:roborock'
            style:
              top: 87.41%
              left: 4.8%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4vw
              --iron-icon-width: 4vw
            tap_action: !include popup/sidebar_vacuum.yaml
            title: null
            type: icon

          #################################################
          #                                               #
          #                  INFO BUTTON                  #
          #                                               #
          #################################################

          - icon: 'mdi:information-outline'
            style:
              top: 87.41%
              left: 10.7%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4vw
              --iron-icon-width: 4vw
            tap_action: !include popup/sidebar_information.yaml
            title: null
            type: icon

          - conditions:
              - entity: sensor.hass_version_template
                state_not: Senaste
            elements:
              - image: /local/update_available.svg
                style:
                  top: 85%
                  left: 12.2%
                  width: 1.7%
                  cursor: default
                type: image
            type: conditional

          #################################################
          #                                               #
          #                 SCENES BUTTON                 #
          #                                               #
          #################################################

          - icon: 'mdi:home-heart'
            style:
              top: 87.55%
              left: 16.55%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4.6vw
              --iron-icon-width: 4.6vw
            tap_action: !include popup/sidebar_scenarier.yaml
            title: null
            type: icon

          #################################################
          #                                               #
          #                  HACS SENSOR                  #
          #                                               #
          #################################################

          - conditions:
              - entity: sensor.hacs
                state_not: '0'
              - entity: sensor.hacs
                state_not: unknown
            elements:
              - entity: sensor.hacs
                prefix: "HACS: "
                style:
                  top: 95.2%
                  left: 10.45%
                  letter-spacing: 0.06vw
                  font-family: SF Display
                  color: '#6a7377'
                  font-size: 1.15vw
                  font-weight: 500
                  opacity: 0.5
                  background: '#202a2f90'
                  padding: 0.4vw 0.5vw 0.4vw 0.5vw
                  border-radius: 0.7vw
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    card:
                      type: iframe
                      url: !secret hacs_url
                      aspect_ratio: 60%
                      style: |
                        ha-card {
                          border-radius: 1em;
                        }
                    deviceID:
                      - this
                    style:
                      background: none
                      box-shadow: none
                      width: 75em
                    title: Stäng
                hold_action:
                  action: none
                type: state-label
            type: conditional

          ##########################################################################
          #                                                                        #
          #                             * VARDAGSRUM *                             #
          #                                                                        #
          ##########################################################################

          - prefix: Vardagsrum
            <<: *title
            style:
              top: 9.15%
              left: 24.85%
              <<: *title-style

          #################################################
          #                                               #
          #                   BELYSNING                   #
          #                                               #
          #################################################

          - entity: light.belysning
            state_image:
              'on': /local/btn/var_belysning_on.svg
              'off': /local/btn/var_belysning_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &var_belysning-pos
              top: 20.35%
              left: 30.31%
              width: 10%
            type: image

          - conditions:
              - entity: light.belysning
                state_not: unavailable
            elements:
              - entity: light.belysning
                icon: 'bha:hue-bulb'
                style:
                  top: 15.6%
                  left: 27.35%
                  --iron-icon-height: 1.87vw
                  --iron-icon-width: 1.87vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.belysning
                state: 'on'
            elements:
              - entity: sensor.belysning_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 32.8%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *var_belysning-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.belysning
            hold_action: !include popup/vardagsrum_belysning.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                   SKRIVBORD                   #
          #                                               #
          #################################################

          - entity: light.fonsterlampa
            state_image:
              'on': /local/btn/var_skrivbord_on.svg
              'off': /local/btn/var_skrivbord_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &var_skrivbord-pos
              top: 20.35%
              left: 41.31%
              width: 10%
            type: image

          - conditions:
              - entity: light.fonsterlampa
                state_not: unavailable
            elements:
              - entity: light.fonsterlampa
                icon: 'bha:skrivbord'
                style:
                  top: 15.45%
                  left: 38.45%
                  --iron-icon-height: 2.5vw
                  --iron-icon-width: 2.5vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.fonsterlampa
                state: 'on'
            elements:
              - entity: sensor.fonsterlampa_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 43.8%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *var_skrivbord-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.fonsterlampa
            hold_action: !include popup/vardagsrum_skrivbordslampa.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                      TV                       #
          #                                               #
          #################################################

          - entity: switch.tv_template
            state_image:
              'on': /local/btn/var_tv_on.svg
              'off': /local/btn/var_tv_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 30.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_tv.yaml
            title: null
            type: image

          - conditions:
              - entity: input_boolean.sony_bravia_tv
                state: 'on'
              - entity: switch.tv_template
                state: 'off'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 33%
                  width: 3.5%
                  filter: opacity(45%) invert(1)
                  cursor: default
                type: image
            type: conditional

          - conditions:
              - entity: input_boolean.sony_bravia_tv
                state: 'on'
              - entity: switch.tv_template
                state: 'on'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 33%
                  width: 3.5%
                  filter: opacity(45%)
                  cursor: default
                type: image
            type: conditional

          #################################################
          #                                               #
          #                  PLAYSTATION                  #
          #                                               #
          #################################################

          - entity: switch.playstation_template
            state_image:
              'on': /local/btn/var_playstation_on.svg
              'off': /local/btn/var_playstation_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 41.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_playstation.yaml
            title: null
            type: image

          - conditions:
              - entity: input_boolean.playstation_template
                state: 'on'
              - entity: switch.playstation_template
                state: 'off'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 44%
                  width: 3.5%
                  filter: opacity(45%) invert(1)
                  cursor: default
                type: image
            type: conditional

          - conditions:
              - entity: input_boolean.playstation_template
                state: 'on'
              - entity: switch.playstation_template
                state: 'on'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 44%
                  width: 3.5%
                  filter: opacity(45%)
                  cursor: default
                type: image
            type: conditional

          ##########################################################################
          #                                                                        #
          #                               * STUDIO *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Studio
            <<: *title
            style:
              top: 9.15%
              left: 49.65%
              <<: *title-style

          #################################################
          #                                               #
          #                  DATORLAMPA                   #
          #                                               #
          #################################################

          - entity: light.datorlampa
            state_image:
              'on': /local/btn/stu_datorlampa_on.svg
              'off': /local/btn/stu_datorlampa_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &stu_datorlampa-pos
              top: 20.35%
              left: 55.18%
              width: 10%
            type: image

          - conditions:
              - entity: light.datorlampa
                state_not: unavailable
            elements:
              - entity: light.datorlampa
                icon: 'bha:hue-bulb'
                style:
                  top: 15.6%
                  left: 52.19%
                  --iron-icon-height: 1.87vw
                  --iron-icon-width: 1.87vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.datorlampa
                state: 'on'
            elements:
              - entity: sensor.datorlampa_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 57.65%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *stu_datorlampa-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.datorlampa
            hold_action: !include popup/studio_datorlampa.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                   TAKLAMPOR                   #
          #                                               #
          #################################################

          - entity: light.taklampor
            state_image:
              'on': /local/btn/stu_taklampor_on.svg
              'off': /local/btn/stu_taklampor_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &stu_taklampor-pos
              top: 20.35%
              left: 66.14%
              width: 10%
            type: image

          - conditions:
              - entity: light.taklampor
                state_not: unavailable
            elements:
              - entity: light.taklampor
                icon: 'bha:spot'
                style:
                  top: 17.2%
                  left: 63.53%
                  --iron-icon-height: 2.4vw
                  --iron-icon-width: 2.4vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.taklampor
                state: 'on'
            elements:
              - entity: sensor.taklampor_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 68.5%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *stu_taklampor-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.taklampor
            hold_action: !include popup/studio_taklampor.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                     DATOR                     #
          #                                               #
          #################################################

          - entity: switch.dator_template
            state_image:
              'on': /local/btn/stu_dator_on.svg
              'off': /local/btn/stu_dator_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 55.18%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_dator.yaml
            title: null
            type: image

          - conditions:
              - entity: input_boolean.dator_template
                state: 'on'
              - entity: switch.dator_template
                state: 'off'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 57.8%
                  width: 3.5%
                  filter: opacity(45%) invert(1)
                  cursor: default
                type: image
            type: conditional

          - conditions:
              - entity: input_boolean.dator_template
                state: 'on'
              - entity: switch.dator_template
                state: 'on'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 57.8%
                  width: 3.5%
                  filter: opacity(45%)
                  cursor: default
                type: image
            type: conditional

          - type: conditional
            conditions:
              - entity: input_boolean.lock_computer
                state: 'on'
            elements:
              - icon: 'mdi:lock-alert'
                style:
                  top: 33.58%
                  left: 57.65%
                  color: '#6e818a60'
                  --iron-icon-height: 2.2vw
                  --iron-icon-width: 2.2vw
                tap_action:
                  action: none
                title: null
                type: icon

          #################################################
          #                                               #
          #                   MONITORER                   #
          #                                               #
          #################################################

          - entity: switch.wemo_monitorer
            state_image:
              'on': /local/btn/stu_monitorer_on.svg
              'off': /local/btn/stu_monitorer_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 66.14%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_monitorer.yaml
            title: null
            type: image

          ##########################################################################
          #                                                                        #
          #                               * SOVRUM *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Sovrum
            <<: *title
            style:
              top: 9.15%
              left: 74.55%
              <<: *title-style

          #################################################
          #                                               #
          #                 MATTIAS LIGHT                 #
          #                                               #
          #################################################

          - entity: light.mattias
            state_image:
              'on': /local/btn/sov_mattias_on.svg
              'off': /local/btn/sov_mattias_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &sov_mattias-pos
              top: 20.35%
              left: 80.05%
              width: 10%
            type: image

          - conditions:
              - entity: light.mattias
                state_not: unavailable
            elements:
              - entity: light.mattias
                icon: 'bha:sovrum'
                style:
                  top: 15.1%
                  left: 76.95%
                  --iron-icon-height: 1.9vw
                  --iron-icon-width: 1.9vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.mattias
                state: 'on'
            elements:
              - entity: sensor.mattias_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 82.5%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *sov_mattias-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.mattias
            hold_action: !include popup/sovrum_mattias.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                  SANJA LIGHT                  #
          #                                               #
          #################################################

          - entity: light.sanja
            state_image:
              'on': /local/btn/sov_sanja_on.svg
              'off': /local/btn/sov_sanja_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &sov_sanja-pos
              top: 20.35%
              left: 91.05%
              width: 10%
            type: image

          - conditions:
              - entity: light.sanja
                state_not: unavailable
            elements:
              - entity: light.sanja
                icon: 'bha:sovrum'
                style:
                  top: 15.1%
                  left: 87.95%
                  --iron-icon-height: 1.9vw
                  --iron-icon-width: 1.9vw
                type: state-icon
            type: conditional

          - conditions:
              - entity: light.sanja
                state: 'on'
            elements:
              - entity: sensor.sanja_percent
                <<: *circle-sensor-light
                style:
                  top: 16.3%
                  left: 93.5%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *sov_sanja-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.sanja
            hold_action: !include popup/sovrum_sanja.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                      FAN                      #
          #                                               #
          #################################################

          - entity: switch.wemo_flakt
            state_image:
              'on': /local/btn/sov_flakt_on.svg
              'off': /local/btn/sov_flakt_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_flakt.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                      TV2                      #
          #                                               #
          #################################################

          - entity: switch.tv2_template
            state_image:
              'on': /local/btn/sov_tv_on.svg
              'off': /local/btn/sov_tv_off.svg
              unavailable: /local/btn/unavailable.svg
            style:
              top: 37.9%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_tv2.yaml
            title: null
            type: image

          - conditions:
              - entity: input_boolean.samsung
                state: 'on'
              - entity: switch.tv2_template
                state: 'off'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 93.8%
                  width: 3.5%
                  filter: opacity(45%) invert(1)
                  cursor: default
                type: image
            type: conditional

          - conditions:
              - entity: input_boolean.samsung
                state: 'on'
              - entity: switch.tv2_template
                state: 'on'
            elements:
              - image: /local/loader.svg
                style:
                  top: 33.6%
                  left: 93.8%
                  width: 3.5%
                  filter: opacity(45%)
                  cursor: default
                type: image
            type: conditional

          ##########################################################################
          #                                                                        #
          #                               * MEDIA *                                #
          #                                                                        #
          ##########################################################################
 
          - prefix: Media
            <<: *title
            style:
              top: 53.4%
              left: 24.75%
              <<: *title-style

          - cards: !include media.yaml
            start_card: 1
            parameters:
              effect: coverflow
              speed: 450
              spaceBetween: 10
              threshold: 30
              coverflowEffect:
                rotate: 70
                stretch: 0
                depth: 300
                modifier: 1
                slideShadows : true
            style:
              top: 56.6%
              left: 35.8%
              width: 20.97%
              height: 1px
              --ha-card-background: none
              --ha-card-border-radius: 0.75vw
              --ha-card-box-shadow: none
              image-rendering: crisp-edges
              padding: 0
            type: custom:swipe-card

          ##########################################################################
          #                                                                        #
          #                               * LAMPOR *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Lampor
            <<: *title
            style:
              top: 53.4%
              left: 49.6%
              <<: *title-style

          #################################################
          #                                               #
          #                    BADRUM                     #
          #                                               #
          #################################################

          - entity: light.badrum
            state_image:
              'on': /local/btn/lam_badrum_on.svg
              'off': /local/btn/lam_badrum_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &lam_badrum-pos
              top: 64.5%
              left: 55.18%
              width: 10%
            type: image

          - conditions:
              - entity: light.badrum
                state: 'on'
            elements:
              - entity: sensor.badrum_percent
                <<: *circle-sensor-light
                style:
                  top: 60.5%
                  left: 57.65%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *lam_badrum-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.badrum
            hold_action: !include popup/lampor_badrum.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                      KÖK                      #
          #                                               #
          #################################################

          - entity: light.kok
            state_image:
              'on': /local/btn/lam_kok_on.svg
              'off': /local/btn/lam_kok_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &lam_kok-pos
              top: 64.5%
              left: 66.14%
              width: 10%
            type: image

          - conditions:
              - entity: light.kok
                state: 'on'
            elements:
              - entity: sensor.kok_percent
                <<: *circle-sensor-light
                style:
                  top: 60.5%
                  left: 68.5%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *lam_kok-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.kok
            hold_action: !include popup/lampor_kok.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                   GARDEROB                    #
          #                                               #
          #################################################

          - entity: light.kladkammare_2
            state_image:
              'on': /local/btn/lam_garderob_on.svg
              'off': /local/btn/lam_garderob_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &lam_garderob-pos
              top: 82.17%
              left: 55.18%
              width: 10%
            type: image

          - conditions:
              - entity: light.kladkammare_2
                state: 'on'
            elements:
              - entity: sensor.garderob_percent
                <<: *circle-sensor-light
                style:
                  top: 78%
                  left: 57.7%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *lam_garderob-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.kladkammare_2
            hold_action: !include popup/lampor_garderob.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                     HALL                      #
          #                                               #
          #################################################

          - entity: light.hall
            state_image:
              'on': /local/btn/lam_hall_on.svg
              'off': /local/btn/lam_hall_off.svg
              unavailable: /local/btn/unavailable.svg
            style: &lam_hall-pos
              top: 82.17%
              left: 66.14%
              width: 10%
            type: image

          - conditions:
              - entity: light.hall
                state: 'on'
            elements:
              - entity: sensor.hall_percent
                <<: *circle-sensor-light
                style:
                  top: 78%
                  left: 68.5%
                  <<: *circle-style
            type: conditional

          - image: /local/overlay.svg
            style: *lam_hall-pos
            tap_action:
              action: call-service
              service: light.toggle
              service_data:
                entity_id: light.hall
            hold_action: !include popup/lampor_hall.yaml
            title: null
            type: image

          ##########################################################################
          #                                                                        #
          #                               * HEMMA *                                #
          #                                                                        #
          ##########################################################################

          - prefix: Hemma
            <<: *title
            style:
              top: 53.4%
              left: 74.5%
              <<: *title-style

          #################################################
          #                                               #
          #                    MATTIAS                    #
          #                                               #
          #################################################

          - entity: person.mattias
            state_image:
              home: /local/btn/hem_mattias_on.svg
              not_home: /local/btn/hem_mattias_off.svg
            style: &hem_mattias-pos
              top: 64.5%
              left: 80.05%
              width: 10%
            type: image

          - conditions:
              - entity: person.mattias
                state: home
            elements:
              - entity: sensor.mattias_last_changed
                <<: *circle-sensor
                fill: none
                stroke_color: '#aaabad'
                style: &hem_mattias-circle-pos
                  top: 60.8%
                  left: 82.35%
                  <<: *circle-style
            type: conditional

          - conditions:
              - entity: person.mattias
                state: not_home
            elements:
              - entity: sensor.mattias_last_changed
                <<: *circle-sensor
                fill: '#FFFFFF08'
                stroke_color: '#313638'
                style: *hem_mattias-circle-pos
            type: conditional

          - image: /local/overlay.svg
            style: *hem_mattias-pos
            tap_action:
              action: none
            hold_action: !include popup/hemma_mattias.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                     SANJA                     #
          #                                               #
          #################################################

          - entity: person.sanja
            state_image:
              home: /local/btn/hem_sanja_on.svg
              not_home: /local/btn/hem_sanja_off.svg
            style: &hem_sanja-pos
              top: 64.5%
              left: 91.05%
              width: 10%
            type: image

          - conditions:
              - entity: person.sanja
                state: home
            elements:
              - entity: sensor.sanja_last_changed
                <<: *circle-sensor
                fill: none
                stroke_color: '#aaabad'
                style: &hem_sanja-circle-pos
                  top: 60.8%
                  left: 93.35%
                  <<: *circle-style
            type: conditional

          - conditions:
              - entity: person.sanja
                state: not_home
            elements:
              - entity: sensor.sanja_last_changed
                <<: *circle-sensor
                fill: '#FFFFFF08'
                stroke_color: '#313638'
                style: *hem_sanja-circle-pos
            type: conditional

          - image: /local/overlay.svg
            style: *hem_sanja-pos
            tap_action:
              action: none
            hold_action: !include popup/hemma_sanja.yaml
            title: null
            type: image

          #################################################
          #                                               #
          #                  STÄNG ALLT                   #
          #                                               #
          #################################################

          - entity: switch.auto_stangallt_template
            state_image:
              'on': /local/btn/hem_stang_allt_on.svg
              'off': /local/btn/hem_stang_allt_off.svg
            style:
              top: 82.17%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action:
              action: none
            title: null
            type: image

          #################################################
          #                                               #
          #                     HEMMA                     #
          #                                               #
          #################################################

          - entity: switch.auto_hemma_template
            state_image:
              'on': /local/btn/hem_hemma_on.svg
              'off': /local/btn/hem_hemma_off.svg
            style:
              top: 82.17%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/hemma_data_kwh.yaml
            title: null
            type: image

        image: /local/uibg.png
        type: picture-elements
    panel: true
    path: default_view
