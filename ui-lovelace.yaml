
##########################################################################
#                                                                        #
#                              * SETTINGS *                              #
#                                                                        #
##########################################################################

custom_header:
  kiosk_mode: true
  exceptions:
    - conditions:
        user_agent: Mobile
      config:
        kiosk_mode: false

preload_cards:
  - markdown
  - conditional
  - history-graph
  - map
  - iframe

anchors:
  ⚓₁: &title
    entity: sensor.placeholder
    tap_action:
      action: none
    hold_action:
      action: none
    type: state-label
  ⚓₂: &title-style
    color: '#bcbebf'
    font-family: SF Text
    font-size: 2.4vw
    font-weight: 500
    max-width: 1px
    cursor: default

button_card_templates:
  light:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: &button_card_state
      - value: 'on'
        styles:
          card:
            - background-color: rgba(255, 255, 255, 0.8)
          name:
            - color: rgba(0, 0, 0, 0.6)
          state:
            - color: rgba(0, 0, 0, 0.6)
    custom_fields:
      info: >
        [[[ var brightness = Math.round( entity.attributes.brightness / 2.54 ); if (entity.state === 'on') 
        return '<svg viewBox="0 0 50 50"><circle id="c_brightness" cx="25" cy="25" r="20.5" stroke="#b2b2b2" stroke-width="1.5" fill="none" /><text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">' + brightness + '<tspan font-size="10">%</tspan></text></svg>'; ]]]
    extra_styles: |
      [[[ var radius = 20.5; 
      var circumference = radius * 2 * Math.PI; 
      var brightness = Math.round( entity.attributes.brightness / 2.54 );
      return "#c_brightness { transform: rotate(-90deg); transform-origin: 50% 50%; stroke-dasharray: " + circumference + "; stroke-dashoffset: " + (circumference - brightness / 100 * circumference) + ";}"; ]]]
    styles:
      name: &button_style_name
        - justify-self: start
        - padding-bottom: 0.05vw
      state: &button_style_state
        - justify-self: start
        - padding-bottom: 0.05vw
      custom_fields:
        info: &circle_pos
          - top: 8.5%
          - left: 56.2%
          - width: 3.5vw
          - position: absolute
          - letter-spacing: 0.03vw
      card: &button_style_card
        - font-family: Sf Display
        - letter-spacing: 0.05vw
        - text-rendering: optimizeLegibility
        - font-weight: 400
        - color: rgba(255, 255, 255, 0.3)
        - font-size: 1.34vw
        - background-color: rgba(115, 115, 115, 0.2)
        - padding: 6.1vw 0.9vw 0.9vw 1.1vw
        - border-radius: 0.8vw
        - box-shadow: none
        - transition: none
  switch:
    aspect_ratio: 1/1
    show_state: true
    show_icon: false
    state: *button_card_state
    styles:
      name: *button_style_name
      state: *button_style_state
      card: *button_style_card

title: Hemma
views:
  - badges: []
    cards:
      - elements:

          - title: preload_popup
            entities:
              - group.automation_system_reference
              - input_select.hdmi
            style:
              left: -50%
              opacity: 0
            type: custom:hui-entities-card

          #################################################
          #                                               #
          #                   COVID-19                    #
          #                                               #
          #################################################
      
          - content: >
              {% if is_state('sensor.sweden_coronavirus_current', 
              'unavailable') %} {% else %}
              <font color='#6a7377'>
              <b><ha-icon icon="bha:virus"></ha-icon> Coronavirus</b>
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:emoticon-sad"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_current') }}</b> smittade
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:emoticon-happy"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_recovered') }}</b> tillfrisknade
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <b><ha-icon icon="mdi:grave-stone"></ha-icon> 
              {{ states('sensor.sweden_coronavirus_deaths') }}</b> avlidna
              ‍  ‍  ‍   ‍  ‍  ‍ <font color='#2f3436'>|‍</font>  ‍  ‍  ‍   ‍  ‍  ‍ 
              <ha-icon icon="mdi:chart-bar"></ha-icon> 
              {{ ((states('sensor.sweden_coronavirus_confirmed') 
              | int / 10327589 ) * 100) | round(3) }}% av Sverige </font>
              {% endif %}
            style:
              top: 91.9%
              left: 69.3%
              width: 90vw
              height: 1px
              --iron-icon-height: 1.2vw
              --iron-icon-width: 1.2vw
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: '#6a7377'
              font-family: SF Display
              font-size: 1.15vw
              font-weight: 400
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.5
            type: custom:hui-markdown-card

          ##########################################################################
          #                                                                        #
          #                              * SIDEBAR *                               #
          #                                                                        #
          ##########################################################################

          - image: local/sidebar.png
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 50%
              left: 10.6%
              width: 21.5%
              border-right: 1.5px solid rgba(58,69,73,0.2)
            type: image

          #################################################
          #                                               #
          #                     CLOCK                     #
          #                                               #
          #################################################

          - entity: sensor.time
            tap_action:
              action: none
            hold_action:
              action: none
            style:
              top: 10.8%
              left: 2.8%
              color: rgba(255, 255, 255, 0.7)
              font-family: SF Text
              font-size: 5.41vw
              font-weight: 200
              letter-spacing: -0.05vw
              max-width: 1px
              cursor: default
            type: state-label

          #################################################
          #                                               #
          #                   MARKDOWN                    #
          #                                               #
          #################################################

          - content: >
              <font color='#6a7377'><b>{{ states('sensor.dag') }}</b><br>
              <b>{{ states('sensor.datum') }}</b> </font><br> 


              <b>{{ states('sensor.sidebar_greeting') }}</b>


              <b>{{ states('sensor.sidebar_active') }}</b>


              <font color='#6a7377'>
              <b>{{ states('sensor.sidebar_vacuum') }}</b>


              {{ states('sensor.sidebar_weather') }}


              {{ states('sensor.sidebar_skanetrafiken') }}


              {{ states('sensor.tvatta_countdown') }}


              {% if states('sensor.imac_get_ip') == states('sensor.public_ip') 
                 or states('sensor.myip') == states('sensor.public_ip') %}
              {{'\u26A0\uFE0F'}} Kontrollera VPN-anslutning. {% endif %}
              

              {% if is_state('binary_sensor.check_plex', 'off') %}
              {{'\u26A0\uFE0F'}} Plex är nere...{% endif %}


              {% if is_state('binary_sensor.nas_internet_access', 'off') %}
              {{'\u26A0\uFE0F'}} Kontrollera NAS internetåtkomst{% endif %}
              </font>

            style:
              top: 16%
              left: 11%
              width: 17.5vw
              height: 1px
              --ha-card-background: none
              --ha-card-box-shadow: none
              --primary-text-color: rgba(255, 255, 255, 0.9)
              font-family: SF Display
              font-size: 1.6vw
              font-weight: 300
              letter-spacing: 0.06vw
              line-height: 2.05vw
              opacity: 0.75
            type: custom:hui-markdown-card

          #################################################
          #                                               #
          #                KRISINFORMATION                #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.krisinformation_visibility
                state: 'on'
            elements:
              - cards:
                - content: >
                    {{'\u26A0\uFE0F'}} <b>Krisinformation</b><br><br>
                    {{ as_timestamp(state_attr('sensor.krisinformation_sverige', 
                    'messages')[0]["Published"]) | timestamp_custom('%Y-%m-%d') }}<br>
                    {{ state_attr('sensor.krisinformation_sverige', 
                    'messages')[0]["Message"] | truncate(280, True, '...', 0) }}
                  style: |
                    ha-card {
                      padding: 0.4vw;
                    }
                  type: custom:hui-markdown-card
                - type: "custom:button-card"
                  show_label: true
                  label: OK
                  tap_action:
                    action: call-service
                    service: input_boolean.turn_off
                    service_data:
                      entity_id: input_boolean.krisinformation_visibility
                  styles:
                    label:
                      - font-size: 1.5vw
                      - background: '#FFFFFF15'
                      - border-radius: 0.6vw
                      - font-weight: 500
                      - letter-spacing: 0.09vw
                      - opacity: 0.65
                      - padding: 0.7vw 1vw 0.8vw 1vw
                      - font-family: SF Display
                    card:
                      - width: 4.5vw
                      - height: 5vw
                      - margin-top: -0.5vw
                      - padding-bottom: 1vw
                      - margin-left: 138%
                style:
                  --ha-card-background: '#5a1f1f'
                  --ha-card-box-shadow: none
                  filter: 'drop-shadow(0 0 1vw #1e1e1e)'
                  --primary-text-color: rgba(255, 255, 255, 0.9)
                  font-family: SF Display
                  font-size: 1.3vw
                  font-weight: 300
                  height: 1px
                  max-height: 4vw
                  left: 10.7%
                  letter-spacing: 0.06vw
                  line-height: 1.7vw
                  max-width: 17vw
                  position: absolute
                  top: 18%
                  width: 17.5vw
                  hyphens: auto
                  z-index: 10
                  --ha-card-border-radius: 0.7vw
                  --ha-card-border: '0.1vw solid #292c2e'
                type: custom:stack-in-card

          #################################################
          #                                               #
          #                 LAUNDRY TIMER                 #
          #                                               #
          #################################################

          - type: conditional
            conditions:
              - entity: input_boolean.laundry_timer_visibility
                state: 'on'
            elements:
              - type: "custom:button-card"
                entity: timer.laundry
                show_icon: false
                show_name: false
                show_state: true
                tap_action:
                  action: call-service
                  service: script.turn_on
                  service_data:
                    entity_id: script.restart_laundry_timer
                hold_action:
                  action: call-service
                  service: input_boolean.turn_off
                  service_data:
                    entity_id: input_boolean.laundry_timer_visibility
                styles:
                  card:
                    - background: '#202a2f30'
                    - border-radius: 0.7vw
                    - box-shadow: none
                    - border: '0.1vw solid #292c2e'
                  state:
                    - font-size: 2.5vw
                    - font-weight: 500
                    - letter-spacing: 0.09vw
                    - opacity: 0.65
                    - padding: 0.5vw 1vw 0.5vw 1vw
                style:
                  top: 78%
                  left: 10.8%
                  font-size: 1.6vw

          #################################################
          #                                               #
          #                 VACUUM BUTTON                 #
          #                                               #
          #################################################

          - icon: 'bha:roborock'
            style:
              top: 87.41%
              left: 4.8%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4vw
              --iron-icon-width: 4vw
            tap_action: !include popup/sidebar_vacuum.yaml
            title: null
            type: icon

          #################################################
          #                                               #
          #                  INFO BUTTON                  #
          #                                               #
          #################################################

          - icon: 'mdi:information-outline'
            style:
              top: 87.41%
              left: 10.7%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4vw
              --iron-icon-width: 4vw
            tap_action: !include popup/sidebar_information.yaml
            title: null
            type: icon

          - conditions:
              - entity: sensor.hass_version_template
                state_not: Senaste
            elements:
              - image: /local/update_available.svg
                style:
                  top: 85%
                  left: 12.2%
                  width: 1.7%
                  cursor: default
                type: image
            type: conditional

          #################################################
          #                                               #
          #                 SCENES BUTTON                 #
          #                                               #
          #################################################

          - icon: 'mdi:home-heart'
            style:
              top: 87.55%
              left: 16.55%
              color: rgba(255, 255, 255, 0.10)
              --iron-icon-height: 4.6vw
              --iron-icon-width: 4.6vw
            tap_action: !include popup/sidebar_scenarier.yaml
            title: null
            type: icon

          #################################################
          #                                               #
          #                  HACS SENSOR                  #
          #                                               #
          #################################################

          - conditions:
              - entity: sensor.hacs
                state_not: '0'
              - entity: sensor.hacs
                state_not: unknown
            elements:
              - entity: sensor.hacs
                prefix: "HACS: "
                style:
                  top: 95.2%
                  left: 10.45%
                  letter-spacing: 0.06vw
                  font-family: SF Display
                  color: '#6a7377'
                  font-size: 1.15vw
                  font-weight: 500
                  opacity: 0.5
                  background: '#202a2f90'
                  padding: 0.4vw 0.5vw 0.4vw 0.5vw
                  border-radius: 0.7vw
                tap_action:
                  action: call-service
                  service: browser_mod.popup
                  service_data:
                    card:
                      type: iframe
                      url: !secret hacs_url
                      aspect_ratio: 60%
                      style: |
                        ha-card {
                          border-radius: 1em;
                        }
                    deviceID:
                      - this
                    style:
                      background: none
                      box-shadow: none
                      width: 75em
                    title: Stäng
                hold_action:
                  action: none
                type: state-label
            type: conditional

          ##########################################################################
          #                                                                        #
          #                             * VARDAGSRUM *                             #
          #                                                                        #
          ##########################################################################

          - prefix: Vardagsrum
            <<: *title
            style:
              top: 9.15%
              left: 24.85%
              <<: *title-style

          #################################################
          #                                               #
          #                   BELYSNING                   #
          #                                               #
          #################################################

          - entity: light.belysning
            style:
              top: 20.35%
              left: 30.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_belysning.yaml
            custom_fields:
              icon_hue: &icon_hue >
                <svg viewBox="0 0 50 50"><path d="M27.4 47.3h-4.9s-.7.1-.7.8.4.9.7.9h4.9c.3 0 .7-.1.7-.9s-.7-.8-.7-.8zm3.3-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-3H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9-.1-.8-.9-.8-.9-.8zm0-2.9H19.3s-.8 0-.8.8.6.9.8.9h11.5c.2 0 .8-.1.8-.9s-.9-.8-.9-.8zm5.2-23.2c-3.3-5.3-7-5.6-10.9-5.6-3.8 0-8.4.4-10.9 5.6-.1.1-.1.3.1.7.4.8 3.3 7.2 3.2 18.8 0 1.1-.1 1.6 0 1.7 0 .1 0 .7 1.1.7h13c1 0 1-.5 1.1-.7v-1.7c-.1-11.6 2.8-18 3.2-18.8.1-.4.1-.5.1-.7" fill="#9da0a2"/><path d="M14.1 15.3c3.4-.3 7-.4 10.9-.4 3.8 0 7.5.2 10.9.4.4-.4.7-.8.9-1.1C39 8.5 38.9 6.5 38.9 6c-.2-4.4-8.4-5-12.1-5h0-3.4c-3.7 0-12 .5-12.1 5 0 .5-.1 2.5 2.1 8.2 0 .3.3.8.7 1.1z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles: &icon_hue_styles
              custom_fields:
                icon_hue:
                  - top: 11%
                  - left: 4.5%
                  - width: 3.05vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                   SKRIVBORD                   #
          #                                               #
          #################################################

          - entity: light.fonsterlampa
            name: Skrivbord
            style:
              top: 20.35%
              left: 41.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_skrivbordslampa.yaml
            custom_fields:
              icon_shade: >
                <svg viewBox="0 0 50 50"><path d="M26.4 25.6c.6-.3 1.1-.7 1.1-1.3L25 17.9l-2.5 6.4c0 .7.6 1.1 1.1 1.3v20.8h-5.5v2.7h13.7v-2.7h-5.5V25.6z" fill="#9da0a2"/><path d="M24.6.9l-9.4.5c-.6.1-1.9 0-2.5 2.1s-2.4 9.1-4 16.9c-.2.7-.5 2-.5 2.3s-.4 1.6.9 1.6c.8.1 7.4.3 15.9.3 8.6 0 15.1-.3 15.9-.3 1.3-.1.9-1.3.9-1.6s-.3-1.6-.5-2.3c-1.6-7.8-3.4-14.8-4-16.9s-1.9-2-2.5-2.1c-1.6-.2-6.9-.4-9.4-.5" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_shade:
                  - top: 11%
                  - left: 4.6%
                  - width: 3.05vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                      TV                       #
          #                                               #
          #################################################

          - entity: switch.tv_template
            style:
              top: 37.9%
              left: 30.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_tv.yaml
            custom_fields:
              icon_tv: &icon_tv >
                [[[ var fill_color = entity.state === 'on' ? '#616161' : '#9da0a2';
                var gradient = entity.state === 'on' ? '<linearGradient id="A" gradientUnits="userSpaceOnUse" x1="5.401" y1="34.714" x2="43.817" y2="11.74"><stop offset="0" stop-color="#64acb7"/><stop offset="1" stop-color="#7fdbe9"/></linearGradient><path d="M2.9,8h44.3v29.9H2.9V8z" fill="url(#A)"/>' : ' '; 
                return '<svg viewBox="0 0 50 50">' + gradient + '<path d="M46 9.2v27.5H4.1V9.2H46m2.4-2.4H1.6v32.3h46.7c.1 0 .1-32.3.1-32.3zM11.9 43.2h26.3c.6 0 1.1-.4 1.1-1v-.3c0-.6-.4-1.1-1-1.1H11.9c-.6 0-1.1.4-1.1 1v.3a1.11 1.11 0 0 0 1.1 1.1z" fill="' + fill_color + '"/></svg>'; ]]]
              loading: >
                [[[ var boolean = states['input_boolean.sony_bravia_tv'].state; 
                var invert = (entity.state === 'off') ? 'invert(1)' : 'none';
                var loader = '<object type="image/svg+xml" data="/local/loader.svg" width="100%" style="filter:' + invert + '"></object>';
                if (boolean === 'on' && entity.state === 'off' || boolean === 'on' && entity.state === 'on') return loader; ]]]
            styles: &icon_tv_styles
              custom_fields:
                icon_tv:
                  - top: 7%
                  - left: 10.7%
                  - width: 3.5vw
                  - position: absolute
                loading: &loading
                  - top: 3%
                  - left: 60%
                  - width: 3.7vw
                  - position: absolute
                  - opacity: 0.5
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                  PLAYSTATION                  #
          #                                               #
          #################################################

          - entity: switch.playstation_template
            style:
              top: 37.9%
              left: 41.31%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/vardagsrum_playstation.yaml
            custom_fields:
              icon_ps4: >
                [[[ if (entity.state === 'on') 
                return '<svg viewBox="0 0 50 50"><path d="M19.2 26.8l-3.8 1.4L31.6 34l4.8-1.6a9.93 9.93 0 0 1 3-.5c.4 0 .8.1 1.2.2.2.1.6.3.6.5.1.2-.2.5-.5.7-.4.2-.8.5-1.3.6l-3.8 1.4 6 2.2 3.4-1.3c.9-.3 1.6-.9 2.4-1.6.9-.7.8-1.5.1-2.4l-.7-.7c-.9-.7-2-1.3-3.1-1.6-3.3-.9-6.7-1.3-10.2-.8-1.4.2-2.9.6-4.3 1-.2.1-.5.2-.8.2-.9.3-1.3.5-1.8.7" fill="#336db3"/><path d="M17 34.8l-1.3.5L32.2 41l9.8-3.6-6.2-2.2-1.3.5-5.4 2-2.5 1v-3.1l2.6-.8 2.7-.9-16.3-5.8-9.3 3.4-.5.2L12 34l5.1-2 2.2-.8V34c0 .1-2.3.8-2.3.8z" fill="#00aa9e"/><path d="M15.8 35.2l-1.3.5c-1 .4-2.1.6-3.3.5-.5 0-1.1-.2-1.6-.3-.2-.1-.4-.3-.5-.5 0-.2.2-.4.4-.5.4-.2.7-.4 1.1-.5l1.4-.5-6.3-2.2c-1 .4-2 .9-2.8 1.5-1.2.7-1.3 2.1-.2 3.1.3.3.8.7 1.3.9 3.3 1.3 6.7 2 10.2 1.8l2.6-.3c.4-.1 1.6-.3 2.4-.6v1.6c0 .9 0 .9.9 1.3l5.3 1.8 1.1.3 2.4-.8L32 41l-16.2-5.8z" fill="#f3c202"/><path d="M26.7 14c0-.5.2-.9.7-1.2.5-.2.9-.1 1.4.2.7.5.9 1.2.9 2v11.1c0 .8.2 1 .9 1.3.4.2.8.2 1.2.3 2.7.5 4.6-.5 5.6-3.1.1-.2.1-.3.2-.5.5-1.6.5-3.3.5-5-.1-2-.8-3.8-2.1-5.4-1.5-1.8-3.4-3-5.6-3.7L19.9 7.1c-.2 0-.3 0-.5-.1 0 .3-.1.5-.1.8v31.8c0 .9 0 .9.9 1.3l5.3 1.8 1.1.3v-1c-.1 0 .1-28 .1-28z" fill="#de0029"/></svg>'; 
                else return '<svg viewBox="0 0 50 50"><path d="M26.7 14c0-.5.2-.9.7-1.2.5-.2.9-.1 1.4.2.7.5.9 1.2.9 2v11.1c0 .8.2 1 .9 1.3.4.2.8.2 1.2.3 2.7.5 4.6-.5 5.6-3.1.1-.2.1-.3.2-.5.5-1.6.5-3.3.5-5-.1-2-.8-3.8-2.1-5.4-1.5-1.8-3.4-3-5.6-3.7L19.9 7.1c-.2 0-.3 0-.5-.1 0 .3-.1.5-.1.8v31.8c0 .9 0 .9.9 1.3l5.3 1.8 1.1.3v-1c-.1 0 .1-28 .1-28zm-9 13.4l-.9.2-10.6 3.9c-1.2.5-2.3 1-3.3 1.7-1.2.7-1.3 2.1-.2 3.1.4.4.9.7 1.4.9 3.3 1.3 6.7 2 10.2 1.8l2.6-.3c.6-.1.8-.3.9-.9.1-1 0-2 0-3.2h0c-.3.1-.5.2-.7.2l-2.6.9c-1 .4-2.1.6-3.3.5-.5 0-1.1-.2-1.6-.3-.2-.1-.4-.3-.5-.5 0-.2.2-.4.4-.5.4-.2.7-.4 1.1-.5l6.5-2.5c.5-.2.8-.5.8-1.1-.1-.9 0-2 0-2.9-.1-.1-.2-.3-.2-.5zm27.4 8.9c.9-.3 1.6-.9 2.4-1.6.9-.7.8-1.5.1-2.4l-.7-.7c-.9-.7-2-1.3-3.1-1.6-3.3-.9-6.7-1.3-10.2-.8-1.6.2-3.1.7-4.7 1.1-.5.1-.7.4-.7.9v3.5c0 .1.1.2.2.3.3-.1.5-.2.9-.2l7.3-2.5a9.93 9.93 0 0 1 3-.5c.4 0 .8.1 1.2.2.2.1.6.3.6.5.1.2-.2.5-.5.7-.4.2-.8.4-1.3.6l-5 1.9-5.4 2c-.5.2-.9.5-.8 1.2v3.4c.3-.1.5-.1.6-.2l16.1-5.8z" fill="#9da0a2"/></svg>'; ]]]
              loading: >
                [[[ var boolean = states['input_boolean.playstation_template'].state; 
                var invert = (entity.state === 'off') ? 'invert(1)' : 'none';
                var loader = '<object type="image/svg+xml" data="/local/loader.svg" width="100%" style="filter:' + invert + '"></object>';
                if (boolean === 'on' && entity.state === 'off' || boolean === 'on' && entity.state === 'on') return loader; ]]]
            styles:
              custom_fields:
                icon_ps4:
                  - top: 7%
                  - left: 10%
                  - width: 3.5vw
                  - position: absolute
                loading: *loading
            template: switch
            type: custom:button-card

          ##########################################################################
          #                                                                        #
          #                               * STUDIO *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Studio
            <<: *title
            style:
              top: 9.15%
              left: 49.65%
              <<: *title-style

          #################################################
          #                                               #
          #                  DATORLAMPA                   #
          #                                               #
          #################################################

          - entity: light.datorlampa
            style:
              left: 55.18%
              top: 20.35%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_datorlampa.yaml
            custom_fields:
              icon_hue: *icon_hue
            styles: *icon_hue_styles
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                   TAKLAMPOR                   #
          #                                               #
          #################################################

          - entity: light.taklampor
            style:
              top: 20.35%
              left: 66.14%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_taklampor.yaml
            custom_fields:
              icon_spot: &icon_spot >
                <svg viewBox="0 0 50 50"><path d="M26.3 49.2s1.5.5 11-8.7c.5-.4 6.7-6.7 6.2-7.5-.7-.8-19.7-20.7-19.7-20.7s-.6-1-9.1 6.8c-.6.5-9.2 8.5-8.2 9.6l19.8 20.5z" fill="var(--button-card-light-color-no-temperature)"/><path d="M42.2.8H17.4c-.1 0-.1 0-.1.1a3.33 3.33 0 0 0 3.3 3.3h6.5c.1 0 .1 0 .1.1v7.9l3.6 3.7 1-1a2.84 2.84 0 0 0 .7-1.7v-9c0-.1 0-.1.1-.1H39c1.8.1 3.3-1.4 3.2-3.3h0z" fill="#9da0a2"/></svg>
            styles: &icon_spot_styles
              custom_fields:
                icon_spot:
                  - top: 11.5%
                  - left: 8%
                  - width: 2.7vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                     DATOR                     #
          #                                               #
          #################################################

          - entity: switch.dator_template
            style:
              top: 37.9%
              left: 55.18%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_dator.yaml
            custom_fields:
              icon_imac: >
                [[[ var fill_color = entity.state === 'on' ? '#797a7b' : '#9da0a2';
                return '<svg viewBox="0 0 50 50"><path d="M31.9 44.5c-1-.3-1.9.4-1.9-3.7h-9.9c0 4.2-.9 3.4-1.9 3.7s-.2.7-.2.7h14.1s.8-.3-.2-.7zM47.6 4.8H2.5c-1.1 0-2 .9-2 2v30.1c0 1.1.9 2 2 2h45c1.1 0 2-.9 2-2v-30a1.95 1.95 0 0 0-1.9-2.1zm-.7 26.4H3.2V7.6H47v23.6z" fill="' + fill_color + '"/></svg>'; ]]]
              loading: >
                [[[ var boolean = states['input_boolean.dator_template'].state; 
                var invert = (entity.state === 'off') ? 'invert(1)' : 'none';
                var loader = '<object type="image/svg+xml" data="/local/loader.svg" width="100%" style="filter:' + invert + '"></object>';
                if (boolean === 'on' && entity.state === 'off' || boolean === 'on' && entity.state === 'on') return loader; ]]]
              icon_lock: >
                [[[ if (states['input_boolean.lock_computer'].state === 'on' && states['input_boolean.dator_template'].state === 'off') 
                return '<svg viewBox="0 0 50 50"><path d="M8.2 22.6h2.4v-7.2C10.6 7.5 17.1 1 25 1s14.4 6.4 14.4 14.4v7.2h2.4V49H8.2m26.4-26.4v-7.2c0-5.3-4.3-9.6-9.6-9.6s-9.6 4.3-9.6 9.6v7.2"/></svg>'; ]]]
            styles:
              custom_fields:
                icon_imac:
                  - top: 8.5%
                  - left: 11%
                  - width: 3.3vw
                  - position: absolute
                loading: *loading
                icon_lock:
                  - top: 11%
                  - left: 73%
                  - width: 1.8vw
                  - position: absolute
                  - fill: '#9da0a2'
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                   MONITORER                   #
          #                                               #
          #################################################

          - entity: switch.wemo_monitorer
            style:
              top: 37.9%
              left: 66.14%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/studio_monitorer.yaml
            custom_fields:
              icon_monitors: >
                [[[ if (entity.state === 'on') 
                return '<svg viewBox="0 0 50 50"><path d="M35.8 46.9H14.2c-1.1 0-2-1-2-2.3V6.7c0-1.3.9-2.3 2-2.3h21.5c1.1 0 2 1 2 2.3v37.9c0 1.2-.9 2.3-1.9 2.3z" fill="#686868"/><path d="M39.2 1H10.8C9.4 1 8.3 2.1 8.2 3.5v42.9a2.65 2.65 0 0 0 2.6 2.6h28.3c1.4 0 2.5-1.2 2.6-2.6V3.5c0-1.4-1.1-2.5-2.5-2.5zM25 7c1.3 0 2.4 1.1 2.4 2.4s-1.1 2.4-2.4 2.4-2.4-1.1-2.4-2.4C22.5 8 23.6 7 25 7zm10.2 35.5l-.4 1.9s-.2.6-.6.6H15.8c-.4 0-.6-.6-.6-.6s-.1-1.1-.4-1.9.6-.9.6-.9h19.3c0-.1.8-.1.5.9z" fill="#2a2a2a"/><path class="cone animated" d="M25 15.7c-6.2 0-11.3 5.1-11.3 11.3S18.8 38.3 25 38.3 36.3 33.2 36.3 27c-.1-6.3-5.1-11.3-11.3-11.3zm0 14.5a3.33 3.33 0 0 1-3.3-3.3 3.33 3.33 0 0 1 3.3-3.3 3.33 3.33 0 0 1 3.3 3.3c-.1 1.9-1.5 3.3-3.3 3.3z" fill="#e5dd00"/></svg>'; 
                else return '<object type="image/svg+xml" data="/local/monitors.svg"></object>'; ]]]
            styles:
              custom_fields:
                icon_monitors:
                  - top: 11%
                  - left: 7%
                  - width: 2.8vw
                  - position: absolute
            extra_styles: |
              @keyframes scale {
                  0%   { transform:scale(0.9); }
                  25%  { transform:scale(1.4); }
                  50%  { transform:scale(1); }
                  75%  { transform:scale(1.3); }
                  100% { transform:scale(0.9); }
              } 
              .cone.animated {
                  animation: scale 0.6s linear 1;
                  animation-delay: 0.3s;
                  transform-origin: center center; }
            template: switch
            type: custom:button-card

          ##########################################################################
          #                                                                        #
          #                               * SOVRUM *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Sovrum
            <<: *title
            style:
              top: 9.15%
              left: 74.55%
              <<: *title-style

          #################################################
          #                                               #
          #                 MATTIAS LIGHT                 #
          #                                               #
          #################################################

          - entity: light.mattias
            style:
              top: 20.35%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_mattias.yaml
            custom_fields:
              icon_lamp: &icon_lamp >
                <svg viewBox="0 0 50 50"><path d="M26.5 21.8l3.8-6.1H19.7l3.8 6.1c-5 .7-6.3 5.8-5.7 10.2.7 5.1 3.2 10.1 5.7 14.4H19v2.5h11.8v-2.5h-4.5C29 42 31.4 37 32.1 32c.6-4.4-.6-9.4-5.6-10.2zm3.1 9.1c-.3 4.3-2.3 8.7-4.4 12.4l-.2.1v.1-.1c-1.8-3-3.3-6.4-4.1-9.7-.7-3.1-1-7.2 2.7-8.4 1.4-.5 3.1-.1 4.2.8 1.6 1 1.8 3 1.8 4.8z" fill="#9da0a2"/><path d="M38.1 20L35.7 3.8c-.3-1.9-.4-1.7-.6-2-.9-.6-2.3-.7-2.3-.7H17.4s-1.4 0-2.3.7c-.2.3-.3.1-.6 2C14 5.7 11.9 20 11.9 20s5.8.3 13.4.3h0c7.3 0 12.8-.3 12.8-.3z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles: &icon_lamp_styles
              custom_fields:
                icon_lamp:
                  - top: 11%
                  - left: 4.5%
                  - width: 3.05vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                  SANJA LIGHT                  #
          #                                               #
          #################################################

          - entity: light.sanja
            style:
              top: 20.35%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_sanja.yaml
            custom_fields:
              icon_lamp: *icon_lamp
            styles: *icon_lamp_styles
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                      FAN                      #
          #                                               #
          #################################################

          - entity: switch.wemo_flakt
            style:
              top: 37.9%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_flakt.yaml
            custom_fields:
              icon_fan: >
                [[[ if (entity.state === 'on') return '<object type="image/svg+xml" data="/local/fan.svg"></object>'; 
                else return '<svg viewBox="0 0 50 50" fill="#9ca2a5"><g class="spin animated"><circle cx="25" cy="25" r="6.6"/><path d="M31.9 30.4c-.5.6-1.1 1.1-1.7 1.5-1.4 1.1-3.2 1.7-5.2 1.7-2.3 0-4.5-.9-6-2.4-.9 1.1-1.6 2.3-2.3 3.2l-4.9 5.4c-1.8 2.7.3 5.6 2.5 7 3.9 2.4 9.8 3.1 14.1 1.9 4.6-1.3 7.9-4.7 7.4-9.7-.2-3.4-1.9-6-3.9-8.6zM17 28.3c-.4-1-.6-2.1-.6-3.3a8.7 8.7 0 0 1 6.4-8.4l-1.6-3.5L19 6.2c-1.5-2.8-5-2.5-7.3-1.2-4 2.2-7.5 6.9-8.7 11.3-1.2 4.6.2 9.2 4.7 11.3 3.1 1.3 6.1 1.2 9.3.7zm26.9-17.6c-3.3-3.4-8-4.6-12.1-1.8-2.8 1.8-4.2 4.6-5.5 7.5 4.2.6 7.4 4.2 7.4 8.6 0 .9-.1 1.7-.4 2.5 1.3.2 2.8.3 3.8.4 2.3.4 4.7 1.3 7.1 1.7 3.2.3 4.7-3 4.8-5.6.3-4.6-1.9-10.1-5.1-13.3z"/></g></svg>'; ]]]
            styles:
              custom_fields:
                icon_fan:
                  - top: 9%
                  - left: 10%
                  - width: 3vw
                  - position: absolute
            extra_styles: |
              @keyframes spin {
                  from { transform:rotate(0deg); }
                  to { transform:rotate(720deg); }
              }
              .spin.animated {
                  animation: spin 1.7s ease-out 1;
                  transform-origin: center center; }
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                      TV2                      #
          #                                               #
          #################################################

          - entity: switch.tv2_template
            style:
              top: 37.9%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/sovrum_tv2.yaml
            custom_fields:
              icon_tv: *icon_tv
              loading: >
                [[[ var boolean = states['input_boolean.samsung'].state; 
                var invert = (entity.state === 'off') ? 'invert(1)' : 'none';
                var loader = '<object type="image/svg+xml" data="/local/loader.svg" width="100%" style="filter:' + invert + '"></object>';
                if (boolean === 'on' && entity.state === 'off' || boolean === 'on' && entity.state === 'on') return loader; ]]]
            styles: *icon_tv_styles
            template: switch
            type: custom:button-card

          ##########################################################################
          #                                                                        #
          #                               * MEDIA *                                #
          #                                                                        #
          ##########################################################################
 
          - prefix: Media
            <<: *title
            style:
              top: 53.4%
              left: 24.75%
              <<: *title-style

          - cards: !include media.yaml
            start_card: 1
            parameters:
              effect: coverflow
              speed: 450
              spaceBetween: 10
              threshold: 30
              coverflowEffect:
                rotate: 70
                stretch: 0
                depth: 300
                modifier: 1
                slideShadows : true
            style:
              top: 56.55%
              left: 35.8%
              width: 20.97%
              height: 1px
              --ha-card-background: none
              --ha-card-border-radius: .88vw
              --ha-card-box-shadow: none
              image-rendering: crisp-edges
              padding: 0
            type: custom:swipe-card

          ##########################################################################
          #                                                                        #
          #                               * LAMPOR *                               #
          #                                                                        #
          ##########################################################################

          - prefix: Lampor
            <<: *title
            style:
              top: 53.4%
              left: 49.6%
              <<: *title-style

          #################################################
          #                                               #
          #                    BADRUM                     #
          #                                               #
          #################################################

          - entity: light.badrum
            style:
              top: 64.5%
              left: 55.18%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/lampor_badrum.yaml
            custom_fields:
              icon_bathroom: >
                <svg viewBox="0 0 50 50" fill="var(--button-card-light-color-no-temperature)"><path d="M12.9 1.2h2.5c1.6 0 2.9 1.3 2.9 2.9v18.6c0 1.4 1.1 2.5 2.4 2.5h20.5c.5 0 1 .4.9 1-.1 2.6-1.2 9.6-10.2 11v7.6c0 .2.2.4.4.4h1.5a1.58 1.58 0 0 1 1.6 1.6v.3a1.58 1.58 0 0 1-1.6 1.6H11a1.58 1.58 0 0 1-1.6-1.6v-.3a1.58 1.58 0 0 1 1.6-1.6h1.6c.2 0 .4-.2.4-.4v-7.6s-5.2-.3-5.2-5.9V4.2c0-1.6 1.3-2.9 2.9-2.9h2.2v-.1zm9.4 17.6h18.3a1.58 1.58 0 0 1 1.6 1.6v.6a1.58 1.58 0 0 1-1.6 1.6h-19c-.4 0-.7-.3-.8-.7v-2.3c0-.4.3-.7.7-.8h.8z"/></svg>
            styles:
              custom_fields:
                icon_bathroom:
                  - top: 11%
                  - left: 6.5%
                  - width: 3vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                      KÖK                      #
          #                                               #
          #################################################

          - entity: light.kok
            style:
              top: 64.5%
              left: 66.14%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/lampor_kok.yaml
            custom_fields:
              icon_kitchen: >
                <svg viewBox="0 0 50 50"><path d="M13.3 37.1V29c0-.3 0-.5.1-.8.1-.2.3-.4.5-.6.4-.4.8-.7 1-1.1.1-.3.1-.6.1-.9V23c0-.3 0-.6-.1-.9-.1-.5-.4-.9-.7-1.2s-.6-.5-.9-.7c-.7-.5-1.2-1-1.7-1.5-1-1.2-1.6-2.9-1.6-4.4v-10c0-2.2 3.4-2.1 3.4.1v8.5c0 .4.2.7.6.8s.7 0 1-.4V4.4c0-2.2 3.4-2.2 3.4 0V13c0 .4.3.7.6.8.4.1.8-.1 1-.4.1-.1.1-.3.1-.4V4.5a1.69 1.69 0 0 1 .3-1c.9-1.4 3.1-.6 3.1 1v9.9c0 .4 0 .8-.1 1.2-.2 1-.6 1.9-1.2 2.8-.5.7-1.1 1.2-1.8 1.7-.2.1-.3.2-.5.3-.5.4-.9.9-1.2 1.4-.2.4-.3.8-.2 1.2v3c0 .5.2.9.5 1.2l.6.6c.2.2.3.3.4.6s.2.6.2.9v16c0 1.9-1.5 3.7-3.6 3.6s-3.2-1.8-3.2-3.7c0 .2-.1-8.1-.1-8.1zM40 24.8v20.3c0 1.9-1.5 3.7-3.6 3.6-1.8-.1-3.3-1.7-3.3-3.6V26.6c0-.7-.4-1.2-1-1.6-.2-.1-.4-.2-.6-.2s-.4 0-.6-.1c-.4-.1-.7-.4-.8-.7s-.2-.5-.2-.8V12.7c0-3.8.8-9.7 4.8-11.3 2.7-1.1 5.4.3 5.4 3.4 0-.1-.1 20-.1 20z" fill="var(--button-card-light-color-no-temperature)"/></svg>
            styles:
              custom_fields:
                icon_kitchen:
                  - top: 11%
                  - left: 6%
                  - width: 3vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                   GARDEROB                    #
          #                                               #
          #################################################

          - entity: light.kladkammare_2
            style:
              top: 82.1%
              left: 55.18%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/lampor_garderob.yaml
            custom_fields:
              icon_closet: >
                [[[ if (entity.state === 'on') return '<svg viewBox="0 0 50 50"><path d="M11.4,1.4h27.2v43.1H11.4V1.4z" fill="#bcbcbc"/><path d="M11.4 1.4v43.1l21.5 4.1-.2-43.4-21.3-3.8zm18.1 26.8c0 1.1-.7 1.8-1.5 1.7h0c-.8-.2-1.5-1.1-1.5-2.2v-3.9c0-1.1.7-1.8 1.5-1.7h0c.8.2 1.5 1.1 1.5 2.2v3.9z" fill="#b68349"/></svg>'; 
                else return '<svg viewBox="0 0 50 50"><path d="M11.4 1.4v43.1h27.2V1.4H11.4zm23 23.4c0 1.1-.9 1.9-1.9 1.9h0c-1.1 0-1.9-.9-1.9-1.9V21c0-1.1.9-1.9 1.9-1.9h0c1.1 0 1.9.9 1.9 1.9v3.8z" fill="#9da0a2"/></svg>'; ]]]
            styles:
              custom_fields:
                icon_closet:
                  - top: 11%
                  - left: 4.1%
                  - width: 3.2vw
                  - position: absolute
            template: light
            type: custom:button-card

          #################################################
          #                                               #
          #                     HALL                      #
          #                                               #
          #################################################

          - entity: light.hall
            style:
              top: 82.1%
              left: 66.14%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/lampor_hall.yaml
            custom_fields:
              icon_spot: *icon_spot
            styles: *icon_spot_styles
            template: light
            type: custom:button-card

          ##########################################################################
          #                                                                        #
          #                               * HEMMA *                                #
          #                                                                        #
          ##########################################################################

          - prefix: Hemma
            <<: *title
            style:
              top: 53.4%
              left: 74.5%
              <<: *title-style

          #################################################
          #                                               #
          #                    MATTIAS                    #
          #                                               #
          #################################################

          - entity: person.mattias
            state_display: >
              [[[ return entity.state == 'home' ? 'Ja' : 'Nej'; ]]]
            show_entity_picture: true
            state: &button_home_state
              - value: 'home'
                styles:
                  card:
                    - background-color: rgba(255, 255, 255, 0.8)
                  name:
                    - color: rgba(0, 0, 0, 0.6)
                  state:
                    - color: rgba(0, 0, 0, 0.6)
                  custom_fields:
                    info:
                      - color: '#959698'
            styles: &button_home_styles
              card:
                - padding: 0.9vw 0.9vw 0.77vw 1.1vw # 6.1vw 0.9vw 0.9vw 1.1vw
              entity_picture:
                - clip-path: circle(50% at center)
                - top: 3.9%
                - left: 0.5%
                - width: 3vw
                - position: absolute
              custom_fields:
                sensor: *circle_pos
            style:
              top: 64.5%
              left: 80.05%
              width: 10%
            tap_action: !include popup/hemma_mattias.yaml
            hold_action: !include popup/hemma_mattias.yaml
            custom_fields:
              sensor: >
                [[[ var last_changed = states['sensor.mattias_last_changed'].state; 
                var home = (entity.state === 'home'); 
                var stroke_color = home ? '#b2b2b2' : '#313638'; 
                var fill_color = home ? 'none' : '#FFFFFF08';
                return '<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="' + stroke_color+ '" stroke-width="1.5" fill="' + fill_color + '" /><text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">' + last_changed + '</text></svg>'; ]]]
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                     SANJA                     #
          #                                               #
          #################################################

          - entity: person.sanja
            state_display: >
              [[[ return entity.state == 'home' ? 'Ja' : 'Nej'; ]]]
            show_entity_picture: true
            state: *button_home_state
            styles: *button_home_styles
            style:
              top: 64.5%
              left: 91.05%
              width: 10%
            tap_action: !include popup/hemma_sanja.yaml
            hold_action: !include popup/hemma_sanja.yaml
            custom_fields:
              sensor: >
                [[[ var last_changed = states['sensor.sanja_last_changed'].state; 
                var home = (entity.state === 'home'); 
                var stroke_color = home ? '#b2b2b2' : '#313638'; 
                var fill_color = home ? 'none' : '#FFFFFF08';
                return '<svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20.5" stroke="' + stroke_color+ '" stroke-width="1.5" fill="' + fill_color + '" /><text x="50%" y="54%" fill="#8d8e90" font-size="14" text-anchor="middle" alignment-baseline="middle">' + last_changed + '</text></svg>'; ]]]
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                  STÄNG ALLT                   #
          #                                               #
          #################################################

          - entity: switch.auto_stangallt_template
            style:
              top: 82.1%
              left: 80.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action:
              action: none
            custom_fields:
              icon_away: >
                <svg viewBox="0 0 50 50"><path d="M32.1 18.4s.3-1.6.7-2.1c.3-.6.9-1.4 1.6-1.8.6-.4 1.1-.7 1.4-.7s.7-.1 1 .1.6.4.8 1.3l.3 2.7.1 2.4.2 4.1c0 .3.2 3.1.2 3.3s.2 2.7.2 3.2l-.1 2.5c.1 1.6.5 3.1-.2 4.6-.6 1.4-1.7 2.7-2.9 3.6-.5.4-1.9 1.3-2.9 1.7-1.1.5-2.2.8-3.3 1.1-.5.1-1.4.4-2.3.3s-1.8-.6-2.1-1l-1.6-2.3c-.6-.8-2.1-2.3-2.3-2.5l-2.7-2.8c-.2-.2-2.7-3.5-2.9-3.8l-3.1-4.7-1.8-3.2-1.5-2.8-.9-1.8c-.1-.2-.3-1.1-.2-1.4.3-1.2 1.4-1.4 2.3-.7.3.2.9 1 1.1 1.3s6.1 8.1 6.1 8.1c.2.3.7.3.9 0s-.1-.7-.2-.9c-.4-.6-8.3-11.5-8.3-11.5s-.6-.9-.7-1.1c-.3-1.1 0-2.3 1.1-2.7s1.9.3 2.6 1.1c.3.3 8.3 11.5 8.3 11.5.2.2.3.3.5.3.3 0 .5-.4.4-.7-.1-.2-.5-.9-.5-.9L11.8 9c-.6-1-.9-2-.1-3 .7-.8 2.2-1.3 3-.2.3.3 10.1 14.3 10.1 14.3.2.2.5.4.7.3.5-.1.3-.7.1-1-.1-.2-8.4-11.8-8.4-11.8-.4-.9-.6-2 .2-2.8 1-1.1 2.5-.5 3.3.5.2.3 1 1.4 1 1.4l2.7 3.7c.1.2 3.4 4.4 3.8 4.8.9 1.1 1.8 2.2 2.7 3.2l.5.5c.1.1.1.4.1.8 0 1.3.1 2.6.1 3.9 0 .2.1.4.2.6.3.3.6.1.7-.2.1-.2 0-2.4 0-2.7-.3-.3-.5-1.3-.4-2.9zM12.2 46.9s-2.8-.8-4.8-2.7-2.6-2.7-2.8-3-1.8-3-2-3.6c-.2-.5-.2-.7.2-1 .4-.4 1-.5 1.3.1.1.2.4 1 .5 1.2s1 1.9 1.7 2.8 1.6 2.2 4.4 3.8c.6.3 1.2.6 1.9.9.3.1.6.2.8.4.1.2.1.6-.1.8-.2.4-.7.4-1.1.3zM7.1 30.7l.9 3.1c.3.7 1.1 2.3 1.9 3.3s2.4 2.6 3.4 3.2 2 1.1 3 1.5c1 .3 1.1.4 1.2.5.3.4.2 1.2-.4 1.3-.2 0-1.2 0-1.8-.3L12 41.7c-.5-.4-3.9-3.1-5.1-6S5.3 31 5.2 30.4s-.2-1.1 0-1.4c.3-.4.9-.8 1.3-.3.2.3.3.6.3.9.1 0 .2.8.3 1.1zm26.8-25s.2-.1.5-.1.8.3 1.4.7 1.9 1 3.6 2.9 2.9 3.9 3.4 5.8c.5 1.8.8 3.1.9 5.5 0 .5.1 1.6 0 1.7-.2.5-.5.7-1 .7-.6 0-.7-.5-.7-1l-.1-2.9c-.1-.6-.3-1.9-.7-2.9-.3-1-.7-2.3-1.7-3.6-.9-1.3-2.1-2.8-3.2-3.5l-2.4-1.5c-.6-.6-.7-1.2 0-1.8zm4.9-2.5s.3-.2.5-.1c.2 0 .7.3.9.4s2.1 1.3 3.6 3c1.5 1.6 3.5 5.1 3.7 7.4.1.4.2.9 0 1-.2.2-.4.4-.7.4-.2 0-.5 0-.7-.1-.1-.2-.4-1.1-.4-1.3s-.6-2-1.1-3.1C44 9.7 43.5 8.5 42 7.1s-2.2-1.9-2.8-2.2-1.1-.6-1.1-1c.1-.3.3-.6.7-.7z" fill="#9da0a2"/></svg>
            styles:
              custom_fields:
                icon_away:
                  - top: 10%
                  - left: 10.1%
                  - width: 3.1vw
                  - position: absolute
            template: switch
            type: custom:button-card

          #################################################
          #                                               #
          #                     HEMMA                     #
          #                                               #
          #################################################

          - entity: switch.auto_hemma_template
            style:
              top: 82.1%
              left: 91.05%
              width: 10%
            tap_action:
              action: toggle
            hold_action: !include popup/hemma_data_kwh.yaml
            custom_fields:
              icon_home: >
                <svg viewBox="0 0 50 50"><path d="M42.2 28.3c0-.8-.2-1-.2-1L26 12.1s-.5-.4-1-.4-1 .3-1 .3L8.2 27.1c-.4.5-.4.9-.4.9v18.3c0 1.1.9 2 1.9 2h8.2a1.47 1.47 0 0 0 1.5-1.5v-14a1.47 1.47 0 0 1 1.5-1.5h8.4a1.47 1.47 0 0 1 1.5 1.5v14a1.47 1.47 0 0 0 1.5 1.5h8.2c1.1 0 2-.9 2-1.9 0-.2-.3-18.1-.3-18.1zM7.3 25l-1.6 1.5s-.3.3-.5.3-.5 0-.8-.2c-.2-.2-2-2.8-2-2.8s-.1-.4-.1-.7c.1-.3.2-.7.3-.8.4-.1 21.5-20.1 21.5-20.1s.4-.3.9-.3c.4 0 .8.1.9.2s.5.4.5.4l8.9 8.5V6s.1-.4.2-.7c.1-.2.3-.3.4-.3s.3-.1.3-.1h3s.3.1.4.3a1.08 1.08 0 0 1 .3.7v9.8l7.2 6.9s.2.3.3.4c.1.2.1.7.1.7 0 .1-.1.4-.2.5s-1.6 2.5-1.6 2.5-.1.3-.3.3c-.2.1-.4.1-.7 0-.2-.1-.5-.4-.5-.4L26.4 9.4s-.3-.3-.5-.4-.4-.2-.8-.2-.5.1-.8.1c-.1.1-.4.3-.7.5C23.3 9.8 7.3 25 7.3 25z" fill="#9da0a2"/></svg>
            styles:
              custom_fields:
                icon_home:
                  - top: 10.5%
                  - left: 10.1%
                  - width: 2.9vw
                  - position: absolute
            template: switch
            type: custom:button-card

        image: /local/uibg.png
        type: picture-elements
    panel: true
    path: default_view
